<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!-- Elaborado por R.Hoffren (2019) - Master en TIG (Universidad de Zaragoza) -->
    <!-- Este codigo crea un pequeño visor web Leaflet usando JavaScript -->
    
    <title>Raul Hoffren Personal Website | Simple Visor</title>
    <!-- Enlace al fichero de estilos css -->
    <link rel="stylesheet" href="./simple_files/leaflet_smp.css">
    <!-- Enlace al archivo JavaScript de leaflet -->
    <script src="./simple_files/leaflet.js"></script>
  </head>
  <body>
    
    <!-- FRAME SUPERIOR -->
    <div id="frame sup">
      <h1> <b>Raúl Hoffrén | Personal Website</b> </h1>
      <hr style="color: #000000;" size="2">
      <p> - Simple Geo Visor - </p>
      <h6>
        <a href="index.html"><img src="index_files/images/home2.png" alt="home" title="home" style="width: 30px; height: 30px"></a>
        <a href="advanced_visor.html"><img src="index_files/images/visor_a.jpg" alt="advancedvisor" title="Advanced visor" style="width: 25px; height: 30px"></a>
      </h6>
    </div>
    
    <!-- FRAME VISOR -->
    <div id="frame_visor">
      
      <!-- Bloque dónde aparecerá el mapa -->
      <div id="bloque_mapa" style="width: 1000px; height: 800px;"></div>
      
      <script>
        
        // añadimos visor
        var mymap = L.map("bloque_mapa").setView([63, 29], 5);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
          attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
          maxZoom: 18, // zoom maximo
          id: 'mapbox.streets',
          accessToken: 'your.mapbox.acces.token'
        }).addTo(mymap);
        
        // añadimos barra de escala
        var scale_bar = L.control.scale(
          {position: 'bottomright'} 
        );
        scale_bar.addTo(mymap);
        
        // añadimos capa base OSM
        var OSM = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          maxZoom: 18,
          attribution: "OpenStreetMap",
        });
        OSM.addTo(mymap)
        
        // añadimos capa PNOA
        var pnoa = L.tileLayer.wms("http://www.idee.es/wms/PNOA/PNOA?",{
          layers: "PNOA",
          format: "image/png",
          transparent: true,
          attribution: "PNOA"
        });
        pnoa.addTo(mymap);
        
        // añadimos capa "Dark"
        var dark = L.tileLayer("https://{s}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png", {
          attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          maxZoom: 22
        });
        dark.addTo(mymap)
       
        // añadimos capa MODIS (NASA)
        var modis = L.tileLayer('https://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_CorrectedReflectance_Bands367/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}', {
          attribution: 'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',
          bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
          minZoom: 1,
          maxZoom: 9,
          format: 'jpg',
          time: '',
          tilematrixset: 'GoogleMapsCompatible_Level'
        });
        modis.addTo(mymap)
        
        // añadimos capa "Labels"
        var labels = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}', {
          attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          subdomains: 'abcd',
          minZoom: 0,
          maxZoom: 18,
          ext: 'png'
        });
        labels.addTo(mymap)
        
        // añadimos controles de capas
        // capas base
        var baseMaps = {
          "OpenStreetMap": OSM,
          "Dark Map": dark,
          "MODIS": modis
        };
        // capas superpuestas
        var overlayMaps = {
          "Ortofoto PNOA": pnoa,
          "Etiquetas": labels
        };
        // posicion y contenido del control de capas
        var capas = L.control.layers( 
          baseMaps, 
          overlayMaps,
          {position: 'topleft'},
          {collapsed: true}); 
        capas.addTo(mymap);
     </script>
    </div>
  </body>
</html>
